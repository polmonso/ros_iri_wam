<!-- -->
<launch>

  <include file="$(find teo_base)/machines/$(env ROBOT).machines" />

  <include file="$(find teo_base)/launch/teo_base.launch" />


    <!-- Odometria Segway RMP 400 -->

    <node pkg="iri_segway_rmp400_odom"
          type="iri_segway_rmp400_odom"
          name="iri_segway_rmp400_odom"
          output="screen">
      <param name="world_id" value="odom"/>
      <param name="odom_id"  value="segway_odom"/>
      <param name="publish_tf"  value="false"/>
      <remap from="/segway_rmp400_odom/platform_status" to="/$(env ROBOT)/segway/status" />
    </node>

    <!-- Odometria Laser-ICP FRONT
          x,y,th prediction using segway's odometry -->

    <!-- icp node -->
    <node pkg="laser_scan_matcher"
          type="laser_scan_matcher_node"
          name="laser_scan_matcher"
          output="screen" >
      <!-- input -->
      <remap from="/scan" to="/teo/front_laser/scan" />
      <remap from="/odom" to="/segway_rmp400_odom/segway_odom" />
      <!-- output -->
      <!-- frames -->
      <param name="fixed_frame" value="odom"/>
      <param name="base_frame"  value="base_footprint"/>
      <!-- parameters -->
      <param name="use_imu"        value="false"/>
      <param name="use_odom"       value="true"/>
      <param name="use_alpha_beta" value="false"/>
      <param name="max_iterations" value="10"/>
      <!-- publishing -->
      <param name="publish_tf"   value="false"/>
      <param name="publish_pose" value="true"/>
    </node>

    <!-- pose2d_odom -->
    <node pkg="iri_pose2d_odom"
          type="iri_pose2d_odom"
          name="pose2d_odom"
          output="screen" >
      <!-- input -->
      <remap from="/pose2d_odom/pose2d" to="/pose2D" />
      <!-- output -->
      <!-- parameters -->
      <param name="parent_id"  value="odom" />
      <param name="frame_id"   value="base_footprint" />
      <param name="publish_tf" value="false" />
    </node>



</launch>
